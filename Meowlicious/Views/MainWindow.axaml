<Window
    x:Class="Meowlicious.Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
    xmlns:i="clr-namespace:Avalonia.Xaml.Interactivity;assembly=Avalonia.Xaml.Interactivity"
    xmlns:ia="clr-namespace:Avalonia.Xaml.Interactions.Core;assembly=Avalonia.Xaml.Interactions"
    xmlns:material="using:Material.Icons.Avalonia"
    xmlns:vm="using:Meowlicious.ViewModels"
    Title="Meowlicious"
    MinWidth="1420"
    MinHeight="600"
    x:DataType="vm:MainWindowViewModel"
    Icon="/Assets/favicon.ico">

    <Grid
        Background="{DynamicResource PrimaryColor}"
        ColumnDefinitions="280,*"
        RowDefinitions="80,*">

        <!--  SideBar  -->
        <Grid Grid.RowSpan="2" RowDefinitions="Auto,Auto,*">
            <Grid.Background>
                <ImageBrush
                    Opacity="0.03"
                    Source="/Assets/Images/seamlessbg.png"
                    Stretch="UniformToFill" />
            </Grid.Background>


            <!--  Top Section  -->
            <StackPanel Grid.Row="0" Margin="10,0,10,0">
                <Image
                    Height="180"
                    HorizontalAlignment="Center"
                    RenderOptions.BitmapInterpolationMode="HighQuality"
                    Source="/Assets/Images/header.png"
                    Stretch="UniformToFill" />

                <Separator
                    Height="1"
                    Margin="10,0,10,10"
                    Opacity="0.3" />

                <TextBox
                    Classes="SearchBox"
                    MaxLength="32"
                    Text="{Binding SearchService.SearchText, Mode=TwoWay}"
                    Watermark="{Binding L[SearchWatermark]}">
                    <TextBox.InnerLeftContent>
                        <material:MaterialIcon
                            Width="25"
                            Height="25"
                            Margin="10,0,0,0"
                            Kind="Search" />
                    </TextBox.InnerLeftContent>
                </TextBox>

                <Separator
                    Height="1"
                    Margin="10"
                    Opacity="0.3" />

                <!--  Add Button  -->
                <Button
                    Classes="Sidebar"
                    Command="{Binding AddRecipeCommand}"
                    CornerRadius="5"
                    IsEnabled="{Binding !LayoutService.IsAddRecipeActive}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <material:MaterialIcon
                            Width="25"
                            Height="25"
                            VerticalAlignment="Center"
                            Kind="{Binding LayoutService.AddIcon}" />
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="16"
                            Text="{Binding L[AddRecipeButton]}" />
                    </StackPanel>
                </Button>

                <Separator
                    Height="1"
                    Margin="10"
                    Opacity="0.3" />

            </StackPanel>

            <!--  Middle Section  -->
            <StackPanel Grid.Row="1" Margin="10,0,10,0">
                <Button
                    Classes="Sidebar"
                    Command="{Binding GoToExplorerCommand}"
                    IsEnabled="{Binding !LayoutService.IsExplorerActive}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <material:MaterialIcon
                            Width="25"
                            Height="25"
                            VerticalAlignment="Center"
                            Kind="{Binding LayoutService.ExplorerIcon}" />
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="16"
                            Text="{Binding L[HomeButton]}" />
                    </StackPanel>
                </Button>

                <Button
                    Classes="Sidebar"
                    Command="{Binding GoToFavoritesCommand}"
                    IsEnabled="{Binding !LayoutService.IsFavoritesActive}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <material:MaterialIcon
                            Width="25"
                            Height="25"
                            VerticalAlignment="Center"
                            Kind="{Binding LayoutService.FavoritesIcon}" />
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="16"
                            Text="{Binding L[FavoritesButton]}" />
                    </StackPanel>
                </Button>
            </StackPanel>

            <!--  Bottom Section  -->
            <StackPanel
                Grid.Row="2"
                Margin="10"
                VerticalAlignment="Bottom">

                <Separator
                    Height="1"
                    Margin="10"
                    Opacity="0.3" />

                <Button
                    Classes="Sidebar"
                    Command="{Binding UpdateAppCommand}"
                    IsVisible="{Binding IsUpdateAvailable}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <material:MaterialIcon
                            Width="25"
                            Height="25"
                            VerticalAlignment="Center"
                            Kind="Update" />
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="16"
                            Text="{Binding L[UpdateButton]}" />
                    </StackPanel>
                </Button>


                <Button
                    Classes="Sidebar"
                    Command="{Binding GoToSettingsCommand}"
                    IsEnabled="{Binding !LayoutService.IsSettingsActive}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <material:MaterialIcon
                            Width="25"
                            Height="25"
                            VerticalAlignment="Center"
                            Kind="{Binding LayoutService.SettingsIcon}" />
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="16"
                            Text="{Binding L[SettingsButton]}" />
                    </StackPanel>
                </Button>

                <Button
                    Classes="Sidebar"
                    Command="{Binding GoToAboutCommand}"
                    IsEnabled="{Binding !LayoutService.IsAboutActive}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <material:MaterialIcon
                            Width="25"
                            Height="25"
                            VerticalAlignment="Center"
                            Kind="{Binding LayoutService.AboutIcon}" />
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="16"
                            Text="{Binding L[AboutButton]}" />
                    </StackPanel>
                </Button>
            </StackPanel>

        </Grid>


        <!--  Header  -->
        <Border
            Grid.Row="0"
            Grid.Column="1"
            Margin="0,0,0,5"
            Background="{DynamicResource BackgroundColor}"
            BoxShadow="5 0 15 black">

            <Grid Margin="10">
                <TextBlock
                    VerticalAlignment="Center"
                    FontSize="24"
                    FontWeight="Bold"
                    Text="{Binding LayoutService.HeaderText}" />
            </Grid>
        </Border>

        <!--  Content  -->
        <Border
            Grid.Row="1"
            Grid.Column="1"
            Margin="0,0,0,0"
            Background="Transparent"
            BoxShadow="5 5 15 black">

            <TransitioningContentControl Background="{DynamicResource BackgroundColor}" Content="{Binding NavService.CurrentView}" />
        </Border>
    </Grid>
</Window>